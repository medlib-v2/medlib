$(function(){function e(){var e=function(e){"use strict";var t=e("#grid"),i=e(".js-filter-options > .filter"),n=t.find(".js-shuffle-sizer"),s=function(){setTimeout(function(){t.shuffle("shuffle","all")},0),r(),o(),a(),MedlibApp.onResize(function(){t.shuffle("update")}),t.shuffle({itemSelector:".gallery-item",sizer:n})},r=function(){var n=i;n.on("click",function(){var i=e(this),n=i.data("group");e(".js-filter-options .active").removeClass("active"),i.addClass("active"),t.shuffle("shuffle",n)}),n=null},o=function(){e(".js-sort-options > .sort").on("click",function(){var i=e(this).data("sort-order"),n={reverse:"desc"===i,by:function(e){return e.data("title").toLowerCase()}};e(".js-sort-options .active").removeClass("active"),e(this).addClass("active"),t.shuffle("sort",n)})},a=function(){e(".js-shuffle-search").on("keyup change",function(){var i=this.value.toLowerCase();t.shuffle("shuffle",function(t,n){if("all"!==n.group&&-1===e.inArray(n.group,t.data("groups")))return!1;var s=e.trim(t.find(".picture-item__title").text()).toLowerCase();return-1!==s.indexOf(i)})})};return{init:s}}(jQuery);e.init(),$("#grid").magnificPopup({delegate:".thumbnail > a",type:"image",gallery:{enabled:!0}})}e(),MedlibApp.onPageLoad(e)});