!function(e){function t(){var t=function(e){"use strict";var t=e("#grid"),i=e(".js-filter-options > .filter"),n=t.find(".js-shuffle-sizer"),r=function(){setTimeout(function(){t.shuffle("shuffle","all")},0),s(),o(),a(),MedlibApp.onResize(function(){t.shuffle("update")}),t.shuffle({itemSelector:".gallery-item",sizer:n})},s=function(){var n=i;n.on("click",function(){var i=e(this),n=i.data("group");e(".js-filter-options .active").removeClass("active"),i.addClass("active"),t.shuffle("shuffle",n)}),n=null},o=function(){e(".js-sort-options > .sort").on("click",function(){var i=e(this).data("sort-order"),n={reverse:"desc"===i,by:function(e){return e.data("title").toLowerCase()}};e(".js-sort-options .active").removeClass("active"),e(this).addClass("active"),t.shuffle("sort",n)})},a=function(){e(".js-shuffle-search").on("keyup change",function(){var i=this.value.toLowerCase();t.shuffle("shuffle",function(t,n){if("all"!==n.group&&e.inArray(n.group,t.data("groups"))===-1)return!1;var r=e.trim(t.find(".picture-item__title").text()).toLowerCase();return r.indexOf(i)!==-1})})};return{init:r}}(jQuery);t.init(),e("#grid").magnificPopup({delegate:".thumbnail > a",type:"image",gallery:{enabled:!0}})}t(),MedlibApp.onPageLoad(t)}(jQuery);