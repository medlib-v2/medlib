$(function(){function e(){$("#external-events").find("div.external-event").each(function(){var e={title:$.trim($(this).text())};$(this).data("eventObject",e),$(this).draggable({zIndex:999,revert:!0,revertDuration:0})});var e=new Date,t=e.getDate(),a=e.getMonth(),l=e.getFullYear(),n=$("#calendar").fullCalendar({header:{left:"",center:"",right:""},selectable:!0,selectHelper:!0,select:function(e,t,a){var l=$("#edit-modal"),r=$("#create-event");r.off("click"),r.click(function(){var l=$("#event-name").val();l&&n.fullCalendar("renderEvent",{title:l,start:e,end:t,allDay:a,backgroundColor:"#64bd63",textColor:"#fff"},!0),n.fullCalendar("unselect")}),l.modal("show"),n.fullCalendar("unselect")},editable:!0,droppable:!0,drop:function(e,t){var a=$(this).data("eventObject"),l=$.extend({},a);l.start=e,l.allDay=t;var n=$(this).data("event-class");n&&(l.className=[n]),$("#calendar").fullCalendar("renderEvent",l,!0),$(this).remove()},events:[{title:"All Day Event",start:new Date(l,a,1),backgroundColor:"#79A5F0",textColor:"#fff"},{title:"Long Event",start:new Date(l,a,t+5),end:new Date(l,a,t+7)},{id:999,title:"Repeating Event",start:new Date(l,a,t-3,16,0),allDay:!1},{title:"Click for Flatlogic",start:new Date(l,a,28),end:new Date(l,a,29),url:"http://flatlogic.com/",backgroundColor:"#e5603b",textColor:"#fff"}],eventClick:function(e){if(e.url)return window.open(e.url,"gcalevent","width=700,height=600"),!1;var t=$("#myModal"),a=$("#myModalLabel");a.html(e.title),t.find(".modal-body p").html(function(){return e.allDay?"All day event":"Start At: <strong>"+e.start.getHours()+":"+(0==e.start.getMinutes()?"00":e.start.getMinutes())+"</strong></br>"+(null==e.end?"":"End At: <strong>"+e.end.getHours()+":"+(0==e.end.getMinutes()?"00":e.end.getMinutes())+"</strong>")}()),t.modal("show")}});$("#calendar-switcher").find("label").click(function(){n.fullCalendar("changeView",$(this).find("input").val())});var r=n.fullCalendar("getDate");$("#calender-current-date").html($.fullCalendar.formatDate(r,"MMM yyyy")+" - <span class='fw-semi-bold'>"+$.fullCalendar.formatDate(r,"dddd")+"</span>"),$("#calender-prev").click(function(){n.fullCalendar("prev"),r=n.fullCalendar("getDate"),$("#calender-current-date").html($.fullCalendar.formatDate(r,"MMM yyyy")+" - <span class='fw-semi-bold'>"+$.fullCalendar.formatDate(r,"dddd")+"</span>")}),$("#calender-next").click(function(){n.fullCalendar("next"),r=n.fullCalendar("getDate"),$("#calender-current-date").html($.fullCalendar.formatDate(r,"MMM yyyy")+" - <span class='fw-semi-bold'>"+$.fullCalendar.formatDate(r,"dddd")+"</span>")})}e(),MedlibApp.onPageLoad(e)});