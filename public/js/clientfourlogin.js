function csfblogin(){FB.getLoginStatus(function(t){}),FB.login(function(t){t.authResponse?FB.api("/me",function(t){track_user(t)}):window.location=document.URL},{scope:"email,read_stream"})}function removeURLParameter(t,e){var n=t.split("?");if(n.length>=2){for(var p=encodeURIComponent(e)+"=",s=n[1].split(/[&;]/g),o=s.length;o-- >0;)-1!==s[o].lastIndexOf(p,0)&&s.splice(o,1);return t=n[0]+"?"+s.join("&")}return t}function GetXmlHttpObject(t){var e=null;if(navigator.userAgent.indexOf("Opera")>=0)return void alert("This example doesn't work in Opera");if(navigator.userAgent.indexOf("MSIE")>=0){var n="Msxml2.XMLHTTP";navigator.appVersion.indexOf("MSIE 5.5")>=0&&(n="Microsoft.XMLHTTP");try{return e=new ActiveXObject(n),e.onreadystatechange=t,e}catch(p){return void alert("Error. Scripting for ActiveX might be disabled")}}return navigator.userAgent.indexOf("Mozilla")>=0?(e=new XMLHttpRequest,e.onload=t,e.onerror=t,e):void 0}function track_user(t){xmlHttp=GetXmlHttpObject(handleHttpResponse_user);encodeURIComponent(t.first_name+" "+t.last_name),t.id;xmlHttp.open("GET",url+"app_id="+app_id+"&is_fb=1&siteid="+client_id+"&other="+encodeURIComponent(JSON.stringify(t))),xmlHttp.send(null)}function handleHttpResponse_user(){if(4==xmlHttp.readyState){var t=JSON.parse(xmlHttp.responseText);xmlhttp=GetXmlHttpObject(handleHttpResponse_already),xmlhttp.open("POST","csfiles/csposts.php",!0),xmlhttp.setRequestHeader("Content-type","application/x-www-form-urlencoded"),xmlhttp.send("member_id="+t.member_id+"&udata="+JSON.stringify(t.udata)+"&action=already")}}function handleHttpResponse_already(){if(4==xmlhttp.readyState){var t=xmlhttp.responseText.split("~");t[0]>0?(xmlhttp=GetXmlHttpObject(handleHttpResponse_askpassword),xmlhttp.open("POST","csfiles/csposts.php",!0),xmlhttp.setRequestHeader("Content-type","application/x-www-form-urlencoded"),xmlhttp.send("uname="+t[1]+"&action=allogin")):(xmlhttp=GetXmlHttpObject(handleHttpResponse_register),xmlhttp.open("POST","csfiles/csposts.php",!0),xmlhttp.setRequestHeader("Content-type","application/x-www-form-urlencoded"),xmlhttp.send("uemail="+t[1]+"&action=csRegistration"))}}function handleHttpResponse_askpassword(){4==xmlhttp.readyState&&(popup=window.open("","Login With FB","width=400, height=300"),popup.document.write("<html><body>"+xmlhttp.responseText+"</body></html>"))}function handleHttpResponse_register(){4==xmlhttp.readyState&&(popup_register=window.open("","Register With FB","width=400, height=200"),popup_register.document.write("<html><body>"+xmlhttp.responseText+"</body></html>"))}function cswplogin(t,e){xmlhttp=GetXmlHttpObject(handleHttpResponse_valid),xmlhttp.open("POST","csfiles/csposts.php",!0),xmlhttp.setRequestHeader("Content-type","application/x-www-form-urlencoded"),xmlhttp.send("log="+t+"&pwd="+e+"&action=allogincheck")}function handleHttpResponse_valid(){4==xmlhttp.readyState&&("login_success"==xmlhttp.responseText?(popup.close(),window.open(clientSite+"wp-admin/","_self")):popup.document.getElementById("msg").innerHTML=xmlhttp.responseText)}function csregiter(t,e,n){xmlhttp=GetXmlHttpObject(handleHttpResponse_valid_register),xmlhttp.open("POST","csfiles/csposts.php",!0),xmlhttp.setRequestHeader("Content-type","application/x-www-form-urlencoded"),xmlhttp.send("user_email="+t+"&user_login="+e+"&user_pass="+n+"&action=registerFinal")}function handleHttpResponse_valid_register(){4==xmlhttp.readyState&&("register_success"==xmlhttp.responseText?(popup_register.close(),window.open(clientSite+"wp-admin/","_self")):popup.document.getElementById("msg").innerHTML=xmlhttp.responseText)}var csloginjs=csloginjs||function(){var t={};return{init:function(e){t=e},validateCsApi:function(){return"cssoclever"!=t[0]||"4"!=t[1]||"cssoclever"!=t[2]?void alert("Authentication fail."):void 0}}}(),clientSite="http://www.soclever.net/",client_id="4",sitepath="http://www.coupay.com.sg/",app_id="277195212491747";window.fbAsyncInit=function(){FB.init({appId:app_id,status:!0,cookie:!0,xfbml:!0})},function(t){var e,n="facebook-jssdk",p=t.getElementsByTagName("script")[0];t.getElementById(n)||(e=t.createElement("script"),e.id=n,e.async=!0,e.src="https://connect.facebook.net/en_US/all.js",p.parentNode.insertBefore(e,p))}(document),document.write('<a href="javascript:void(0)" onclick="csfblogin()"><img src="'+sitepath+'img/login_fb.png" style="height:30px;border:2px solid black;"></a>');var url=sitepath+"track_register.php?",popup,popup_register;