function initAppPlugins(){!function(t){t.fn.transparentGroupFocus=function(){return this.each(function(){t(this).find(".input-group-addon + .form-control").on("blur focus",function(e){t(this).parents(".input-group")["focus"==e.type?"addClass":"removeClass"]("focus")})})},t(".input-group-transparent, .input-group-no-border").transparentGroupFocus()}(jQuery),!function(t){t(document).on("click change","[data-ajax-load], [data-ajax-trigger^=change]",function(e){var i=t(this),a=t(i.data("ajax-target"));return a.length>0&&(e=t.Event("ajax-load:start",{originalEvent:e}),i.trigger(e),!e.isDefaultPrevented()&&a.load(i.data("ajax-load"),function(){i.trigger("ajax-load:end")})),!1}),t(document).on("click","[data-toggle^=button]",function(e){return"change"!=t(e.target).find("input").data("ajax-trigger")})}(jQuery),!function(t){t(document).on("click","table th [data-check-all]",function(){t(this).closest("table").find("input[type=checkbox]").not(this).prop("checked",t(this).prop("checked"))})}(jQuery),!function(t){t.fn.animateProgressBar=function(){return this.each(function(){var e=t(this).find(".progress-bar");setTimeout(function(){e.css("width",e.data("width"))},0)})},t(".js-progress-animate").animateProgressBar()}(jQuery)}function initAppFunctions(){!function(t){function e(){t(".sidebar-status .dropdown-toggle").after(t("#notifications-dropdown-menu").detach())}function i(){t("#notifications-dropdown-toggle").after(t("#notifications-dropdown-menu").detach())}function a(){var e=t(".js-sidebar-content");0!=t("#sidebar").find(".slimScrollDiv").length&&e.slimscroll({destroy:!0}),e.slimscroll({height:window.innerHeight,size:"4px"})}var n=t("#load-notifications-btn");n.on("ajax-load:start",function(t){n.button("loading")}),n.on("ajax-load:end",function(){n.button("reset")}),MedlibApp.onScreenSize("xs",e),MedlibApp.onScreenSize("xs",i,!1),Medlib.isScreen("xs")&&e(),t(".sidebar-status").on("show.bs.dropdown",function(){t("#sidebar").css("z-index",2)}).on("hidden.bs.dropdown",function(){t("#sidebar").css("z-index","")}),t("#nav-state-toggle, #nav-collapse-toggle").tooltip(),MedlibApp.onResize(a,!0),a(),t(document).on("close.widgster",function(e){var i=t(e.target).closest('.content > .row > [class*="col-"]:not(.widget-container)');i.find(".widget").not(e.target).length||i.remove()})}(jQuery),!function(t){function e(){var e=t(".chat-sidebar-contacts");0!=t("#chat").find(".slimScrollDiv").length&&e.slimscroll({destroy:!0}),e.slimscroll({height:window.innerHeight,width:"",size:"4px"})}var i=t("body").addClass("chat-sidebar-container");t(document).on("click","[data-toggle=chat-sidebar]",function(){i.toggleClass("chat-sidebar-opened"),t(this).find(".chat-notification-medlib").remove()}),t("#content").on("swipeLeft",function(e){console.log(arguments),t("body").is(".nav-collapsed")&&i.addClass("chat-sidebar-opened")}).on("swipeRight",function(e){t("body").is(".nav-collapsed.chat-sidebar-opened")&&i.removeClass("chat-sidebar-opened").addClass("chat-sidebar-closing").one(t.support.transition.end,function(){t("body").removeClass("chat-sidebar-closing")}).emulateTransitionEnd(300)}),t(document).on("click",".chat-sidebar-user-group > a",function(){var e=t(this),i=t(e.attr("href")),a=i.find(".title");return e.removeClass("active").find(".badge").remove(),i.addClass("open"),t(".chat-sidebar-contacts").removeClass("open"),t(".chat-sidebar-footer").addClass("open"),t(".message-list",i).slimscroll({height:i.height()-a.height()-parseInt(a.css("margin-top"))-parseInt(a.css("margin-bottom")),width:"",size:"4px"}),!1}),t(document).on("click",".chat-sidebar-chat .js-back",function(){t(this).closest(".chat-sidebar-chat").removeClass("open"),t(".chat-sidebar-contacts").addClass("open");return t(".chat-sidebar-footer").removeClass("open"),!1}),t("#chat-sidebar-input").keyup(function(e){if(13==e.keyCode){var i;if(""!=(i=t(this).val().trim())){var a=t(".chat-sidebar-chat.open .message-list"),n=t('<li class="message from-me"><span class="thumb-sm"><img class="img-circle" src="images/avatar.png" alt="..."></span><div class="message-body"></div></li>');n.appendTo(a).find(".message-body").text(i),t(this).val("")}}}),t("#chat-sidebar-search").keyup(function(){var e=t(".chat-sidebar-contacts.open"),i=t(".chat-sidebar-chat.open"),a=t(this).val().trim().toUpperCase();e.length&&t(".chat-sidebar-user-group .list-group-item").addClass("hide").filter(function(){return""==a?!0:-1!=t(this).find(".message-sender").text().toUpperCase().indexOf(a)}).removeClass("hide"),i.length&&t(".chat-sidebar-chat.open .message-list .message").addClass("hide").filter(function(){return""==a?!0:-1!=t(this).find(".message-body").text().toUpperCase().indexOf(a)}).removeClass("hide")}),MedlibApp.onResize(e,!0),e()}(jQuery)}function initAppFixes(){"WebkitAppearance"in document.documentElement.style}function initDemoFunctions(){!function(t){t("#load-notifications-btn").on("ajax-load:end",function(){setTimeout(function(){t("#notifications-list").find(".bg-attention").removeClass("bg-attention")},1e4)}),t("#notifications-toggle").find("input").on("ajax-load:end",function(){t("#notifications-list").find("[data-toggle=tooltip]").tooltip()}),t('[data-toggle="chat-sidebar"]').one("click",function(){setTimeout(function(){t(".chat-sidebar-user-group:first-of-type .list-group-item:first-child").addClass("active").find(".fa-circle").after('<span class="badge badge-danger pull-right animated bounceInDown">3</span>')},1e3)}),setTimeout(function(){var e=t("#chat-notification");e.removeClass("hide").addClass("animated fadeIn").one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(){e.removeClass("animated fadeIn"),setTimeout(function(){e.addClass("animated fadeOut").one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(){e.addClass("hide")})},4e3)}),e.siblings('[data-toggle="chat-sidebar"]').append('<i class="chat-notification-sing animated bounceIn"></i>')},4e3)}(jQuery)}window.PJAX_ENABLED=!0,window.DEBUG=!0,$.fn.widgster.Constructor.DEFAULTS.bodySelector=".widget-body",function(t){var e=function(){this.pjaxEnabled=window.PJAX_ENABLED,this.debug=window.DEBUG,this.navCollapseTimeout=2500,this.$sidebar=t("#sidebar"),this.$content=t("#content"),this.$loaderWrap=t(".loader-wrap"),this.$navigationStateToggle=t("#nav-state-toggle"),this.$navigationCollapseToggle=t("#nav-collapse-toggle"),this.settings=window.MedlibSettings,this.pageLoadCallbacks={},this.resizeCallbacks=[],this.screenSizeCallbacks={xs:{enter:[],exit:[]},sm:{enter:[],exit:[]},md:{enter:[],exit:[]},lg:{enter:[],exit:[]}},this.loading=!1,this._resetResizeCallbacks(),this._initOnResizeCallbacks(),this._initOnScreenSizeCallbacks(),this.$sidebar.on("mouseenter",t.proxy(this._sidebarMouseEnter,this)),this.$sidebar.on("mouseleave",t.proxy(this._sidebarMouseLeave,this)),t(document).on("click",".nav-collapsed #sidebar",t.proxy(this.expandNavigation,this)),"ontouchstart"in window&&this.$content.swipe({swipeLeft:t.proxy(this._contentSwipeLeft,this),swipeRight:t.proxy(this._contentSwipeRight,this),threshold:Medlib.isScreen("xs")?100:200}),this.checkNavigationState(),this.pjaxEnabled&&(this.$sidebar.find(".sidebar-nav a:not([data-toggle=collapse], [data-no-pjax], [href=#])").on("click",t.proxy(this._checkLoading,this)),t(document).pjax("#sidebar .sidebar-nav a:not([data-toggle=collapse], [data-no-pjax], [href=#])","#content",{fragment:"#content",type:"GET",timeout:4e3}),t(document).on("pjax:start",t.proxy(this._changeActiveNavigationItem,this)),t(document).on("pjax:start",t.proxy(this._resetResizeCallbacks,this)),t(document).on("pjax:send",t.proxy(this.showLoader,this)),t(document).on("pjax:success",t.proxy(this._loadScripts,this)),t(document).on("medlib-app:loaded",t.proxy(this._loadingFinished,this)),t(document).on("medlib-app:loaded",t.proxy(this._collapseNavIfSmallScreen,this)),t(document).on("medlib-app:loaded",t.proxy(this.hideLoader,this)),t(document).on("pjax:end",t.proxy(this.pageLoaded,this))),this.$navigationStateToggle.on("click",t.proxy(this.toggleNavigationState,this)),this.$navigationCollapseToggle.on("click",t.proxy(this.toggleNavigationCollapseState,this)),this.$sidebar.find(".collapse").on("show.bs.collapse",function(e){if(e.target==e.currentTarget){var i=t(this).prev("[data-toggle=collapse]");t(i.data("parent")).find(".collapse.in").not(t(this)).collapse("hide")}}).on("show.bs.collapse",function(e){e.target==e.currentTarget&&t(this).closest("li").addClass("open")}).on("hide.bs.collapse",function(e){e.target==e.currentTarget&&t(this).closest("li").removeClass("open")}),window.onerror=t.proxy(this._logErrors,this)};e.prototype._initOnResizeCallbacks=function(){var e,i=this;t(window).on("resize medlib-app:content-resize",function(){clearTimeout(e),e=setTimeout(function(){i._runPageCallbacks(i.pageResizeCallbacks),i.resizeCallbacks.forEach(function(t){t()})},100)})},e.prototype._initOnScreenSizeCallbacks=function(){var e,i=this,a=Medlib.getScreenSize();t(window).resize(function(){clearTimeout(e),e=setTimeout(function(){var t=Medlib.getScreenSize();t!=a&&(i.screenSizeCallbacks[a].exit.forEach(function(e){e(t,a)}),i.screenSizeCallbacks[t].enter.forEach(function(e){e(t,a)}),i.log("screen changed. new: "+t+", old: "+a)),a=t},100)})},e.prototype._resetResizeCallbacks=function(){this.pageResizeCallbacks={}},e.prototype.checkNavigationState=function(){if(this.isNavigationStatic())this.staticNavigationState(),(Medlib.isScreen("sm")||Medlib.isScreen("xs"))&&this.collapseNavigation();else if(Medlib.isScreen("md")||Medlib.isScreen("lg")){var t=this;setTimeout(function(){t.collapseNavigation()},this.navCollapseTimeout)}else this.collapseNavigation()},e.prototype.toggleNavigationCollapseState=function(){t("body").is(".nav-collapsed")?this.expandNavigation():this.collapseNavigation()},e.prototype.collapseNavigation=function(){this.isNavigationStatic()&&(Medlib.isScreen("md")||Medlib.isScreen("lg"))||(t("body").addClass("nav-collapsed"),this.$sidebar.find(".collapse.in").collapse("hide").siblings("[data-toggle=collapse]").addClass("collapsed"))},e.prototype.expandNavigation=function(){this.isNavigationStatic()&&(Medlib.isScreen("md")||Medlib.isScreen("lg"))||(t("body").removeClass("nav-collapsed"),this.$sidebar.find(".active .active").closest(".collapse").collapse("show").siblings("[data-toggle=collapse]").removeClass("collapsed"))},e.prototype._sidebarMouseEnter=function(){(Medlib.isScreen("md")||Medlib.isScreen("lg"))&&this.expandNavigation()},e.prototype._sidebarMouseLeave=function(){(Medlib.isScreen("md")||Medlib.isScreen("lg"))&&this.collapseNavigation()},e.prototype._collapseNavIfSmallScreen=function(){(Medlib.isScreen("xs")||Medlib.isScreen("sm"))&&this.collapseNavigation()},e.prototype.toggleNavigationState=function(){this.isNavigationStatic()?this.collapsingNavigationState():this.staticNavigationState(),t(window).trigger("medlib-app:content-resize")},e.prototype.staticNavigationState=function(){this.settings.set("nav-static",!0).save(),t("body").addClass("nav-static")},e.prototype.collapsingNavigationState=function(){this.settings.set("nav-static",!1).save(),t("body").removeClass("nav-static"),this.collapseNavigation()},e.prototype.isNavigationStatic=function(){return this.settings.get("nav-static")===!0},e.prototype._changeActiveNavigationItem=function(t,e,i){var a=this.$sidebar.find('a[href*="'+this.extractPageName(i.url)+'"]').filter(function(){return this.href===i.url});a.is(".active > .collapse > li > a")||this.$sidebar.find(".active .active").closest(".collapse").collapse("hide"),this.$sidebar.find(".active").removeClass("active"),a.closest("li").addClass("active").parents("li").addClass("active")},e.prototype._contentSwipeLeft=function(){Medlib.isScreen("lg")||t("body").is(".nav-collapsed")||this.collapseNavigation()},e.prototype._contentSwipeRight=function(){Medlib.isScreen("lg")||t("body").is(".chat-sidebar-closing")||t("body").is(".nav-collapsed")&&this.expandNavigation()},e.prototype.showLoader=function(){var t=this;this.showLoaderTimeout=setTimeout(function(){t.$loaderWrap.removeClass("hide"),setTimeout(function(){t.$loaderWrap.removeClass("hiding")},0)},200)},e.prototype.hideLoader=function(){clearTimeout(this.showLoaderTimeout),this.$loaderWrap.addClass("hiding");var e=this;this.$loaderWrap.one(t.support.transition.end,function(){e.$loaderWrap.addClass("hide")}).emulateTransitionEnd(200)},e.prototype.onResize=function(t,e){e="undefined"!=typeof e?e:!1,e?this.resizeCallbacks.push(t):this._addPageCallback(this.pageResizeCallbacks,t)},e.prototype.onPageLoad=function(t){this._addPageCallback(this.pageLoadCallbacks,t)},e.prototype.onScreenSize=function(t,e,i){i="undefined"!=typeof i?i:!0,this.screenSizeCallbacks[t][i?"enter":"exit"].push(e)},e.prototype.pageLoaded=function(){this._runPageCallbacks(this.pageLoadCallbacks)},e.prototype._addPageCallback=function(t,e){var i=this.extractPageName(location.href);t[i]||(t[i]=[]),t[i].push(e)},e.prototype._runPageCallbacks=function(t){var e=this.extractPageName(location.href);t[e]&&t[e].forEach(function(t){t()})},e.prototype._loadScripts=function(e,i,a,n,o){var s=t(t.parseHTML(i.match(/<body[^>]*>([\s\S.]*)<\/body>/i)[0],document,!0)),r=s.filter("script[src]").add(s.find("script[src]")),c=s.filter('script[type="text/template"]').add(s.find('script[type="text/template"]')),l=t("script[src]"),d=t('script[type="text/template"]');c.each(function(){var e=this.id,i=d.filter(function(){return this.id===e});if(!i.length){var a=document.createElement("script");a.id=t(this).attr("id"),a.type=t(this).attr("type"),a.innerHTML=this.innerHTML,document.body.appendChild(a)}});var p={load:function(t){t()}};r.each(function(){var e=this.src,i=l.filter(function(){return this.src===e});if(!i.length){var a=document.createElement("script");a.src=t(this).attr("src"),p.load(function(){document.body.appendChild(a)}),p=t(a)}});var h=this;p.load(function(){t(document).trigger("medlib-app:loaded"),h.log("scripts loaded.")})},e.prototype.extractPageName=function(t){var e=t.split("#")[0].substring(t.lastIndexOf("/")+1).split("?")[0];return""===e?"index.html":e},e.prototype._checkLoading=function(t){var e=this.loading;return this.loading=!0,e?(this.log("attempt to load page while already loading; preventing."),t.preventDefault()):this.log(t.currentTarget.href+" loading started."),!e},e.prototype._loadingFinished=function(){this.loading=!1},e.prototype._logErrors=function(){var t=JSON.parse(localStorage.getItem("lb-errors"))||{};t[(new Date).getTime()]=arguments,localStorage.setItem("medlib-errors",JSON.stringify(t))},e.prototype.log=function(t){this.debug&&console.log("Medlib Application : "+t+" - "+arguments.callee.caller.toString().slice(0,30).split("\n")[0]+" - "+this.extractPageName(location.href))},window.MedlibApp=new e,initAppPlugins(),initAppFunctions(),initAppFixes(),initDemoFunctions()}(jQuery);