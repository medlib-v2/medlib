$(function(){function e(){function e(e){var a=[{name:"id",label:"ID",editable:!1,cell:Backgrid.IntegerCell.extend({orderSeparator:""})},{name:"name",label:"Name",cell:"string"},{name:"pop",label:"Population",cell:"integer"},{name:"url",label:"URL",cell:"uri"}];Sing.isScreen("xs")&&a.splice(3,1);var t=new Backgrid.Grid({columns:a,collection:e,className:"table table-striped table-editable no-margin mb-sm"}),l=new Backgrid.Extension.Paginator({slideScale:.25,goBackFirstOnSort:!1,collection:e,controls:{rewind:{label:'<i class="fa fa-angle-double-left fa-lg"></i>',title:"First"},back:{label:'<i class="fa fa-angle-left fa-lg"></i>',title:"Previous"},forward:{label:'<i class="fa fa-angle-right fa-lg"></i>',title:"Next"},fastForward:{label:'<i class="fa fa-angle-double-right fa-lg"></i>',title:"Last"}}});$("#table-dynamic").html("").append(t.render().$el).append(l.render().$el)}Backgrid.InputCellEditor.prototype.attributes["class"]="form-control input-sm";var a=Backbone.Model.extend({}),t=Backbone.PageableCollection.extend({model:a,url:"demo/json/pageable-territories.json",state:{pageSize:9},mode:"client"}),l=new t,i=l;SingApp.onResize(function(){e(l)}),e(l),$("#search-countries").keyup(function(){var a=$(this),l=i.fullCollection.filter(function(e){return~e.get("name").toUpperCase().indexOf(a.val().toUpperCase())});e(new t(l,{state:{firstPage:1,currentPage:1}}))}),l.fetch(),$(".input-group-transparent, .input-group-no-border").transparentGroupFocus()}function a(){$.extend(!0,$.fn.dataTable.defaults,{sDom:"<'row'<'col-md-6'l><'col-md-6'f>r>t<'row'<'col-md-6'i><'col-md-6'p>>",sPaginationType:"bootstrap",oLanguage:{sLengthMenu:"_MENU_ records per page"}}),$.extend($.fn.dataTableExt.oStdClasses,{sWrapper:"dataTables_wrapper form-inline"}),$.fn.dataTableExt.oApi.fnPagingInfo=function(e){return{iStart:e._iDisplayStart,iEnd:e.fnDisplayEnd(),iLength:e._iDisplayLength,iTotal:e.fnRecordsTotal(),iFilteredTotal:e.fnRecordsDisplay(),iPage:-1===e._iDisplayLength?0:Math.ceil(e._iDisplayStart/e._iDisplayLength),iTotalPages:-1===e._iDisplayLength?0:Math.ceil(e.fnRecordsDisplay()/e._iDisplayLength)}},$.extend($.fn.dataTableExt.oPagination,{bootstrap:{fnInit:function(e,a,t){var l=e.oLanguage.oPaginate,i=function(a){a.preventDefault(),e.oApi._fnPageChange(e,a.data.action)&&t(e)};$(a).append('<ul class="pagination no-margin"><li class="prev disabled"><a href="#">'+l.sPrevious+'</a></li><li class="next disabled"><a href="#">'+l.sNext+"</a></li></ul>");var n=$("a",a);$(n[0]).bind("click.DT",{action:"previous"},i),$(n[1]).bind("click.DT",{action:"next"},i)},fnUpdate:function(e,a){var t,l,i,n,o,s,r=5,d=e.oInstance.fnPagingInfo(),c=e.aanFeatures.p,g=Math.floor(r/2);for(d.iTotalPages<r?(o=1,s=d.iTotalPages):d.iPage<=g?(o=1,s=r):d.iPage>=d.iTotalPages-g?(o=d.iTotalPages-r+1,s=d.iTotalPages):(o=d.iPage-g+1,s=o+r-1),t=0,l=c.length;l>t;t++){for($("li:gt(0)",c[t]).filter(":not(:last)").remove(),i=o;s>=i;i++)n=i==d.iPage+1?'class="active"':"",$("<li "+n+'><a href="#">'+i+"</a></li>").insertBefore($("li:last",c[t])[0]).bind("click",function(t){t.preventDefault(),e._iDisplayStart=(parseInt($("a",this).text(),10)-1)*d.iLength,a(e)});0===d.iPage?$("li:first",c[t]).addClass("disabled"):$("li:first",c[t]).removeClass("disabled"),d.iPage===d.iTotalPages-1||0===d.iTotalPages?$("li:last",c[t]).addClass("disabled"):$("li:last",c[t]).removeClass("disabled")}}}});var e=[];$("#datatable-table").find("thead th").each(function(){$(this).hasClass("no-sort")?e.push({bSortable:!1}):e.push(null)}),$("#datatable-table").dataTable({sDom:"<'row'<'col-md-6 hidden-xs'l><'col-md-6'f>r>t<'row'<'col-md-6'i><'col-md-6'p>>",oLanguage:{sLengthMenu:"_MENU_",sInfo:"Showing <strong>_START_ to _END_</strong> of _TOTAL_ entries"},oClasses:{sFilter:"pull-right",sFilterInput:"form-control input-rounded ml-sm"},aoColumns:e}),$(".dataTables_length select").selectpicker({width:"auto"})}function t(){$(".widget").widgster(),e(),a()}t(),MedlibApp.onPageLoad(t)});