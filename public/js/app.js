function initAppPlugins(){!function(t){t.fn.transparentGroupFocus=function(){return this.each(function(){t(this).find(".input-group-addon + .form-control").on("blur focus",function(e){t(this).parents(".input-group")["focus"==e.type?"addClass":"removeClass"]("focus")})})},t(".input-group-transparent, .input-group-no-border").transparentGroupFocus()}(jQuery),!function(t){t(document).on("click change","[data-ajax-load], [data-ajax-trigger^=change]",function(e){var i=t(this),a=t(i.data("ajax-target"));return a.length>0&&(e=t.Event("ajax-load:start",{originalEvent:e}),i.trigger(e),!e.isDefaultPrevented()&&a.load(i.data("ajax-load"),function(){i.trigger("ajax-load:end")})),!1}),t(document).on("click","[data-toggle^=button]",function(e){return"change"!=t(e.target).find("input").data("ajax-trigger")})}(jQuery),!function(t){t(document).on("click","table th [data-check-all]",function(){t(this).closest("table").find("input[type=checkbox]").not(this).prop("checked",t(this).prop("checked"))})}(jQuery),!function(t){t.fn.animateProgressBar=function(){return this.each(function(){var e=t(this).find(".progress-bar");setTimeout(function(){e.css("width",e.data("width"))},0)})},t(".js-progress-animate").animateProgressBar()}(jQuery)}function initAppFunctions(){!function(t){function e(){t(".sidebar-status .dropdown-toggle").after(t("#notifications-dropdown-menu").detach())}function i(){t("#notifications-dropdown-toggle").after(t("#notifications-dropdown-menu").detach())}function a(){var e=t(".js-sidebar-content");0!=t("#sidebar").find(".slimScrollDiv").length&&e.slimscroll({destroy:!0}),e.slimscroll({height:window.innerHeight,size:"4px"})}var n=t("#load-notifications-btn");n.on("ajax-load:start",function(t){n.button("loading")}),n.on("ajax-load:end",function(){n.button("reset")}),MedlibApp.onScreenSize("xs",e),MedlibApp.onScreenSize("xs",i,!1),Medlib.isScreen("xs")&&e(),t(".sidebar-status").on("show.bs.dropdown",function(){t("#sidebar").css("z-index",2)}).on("hidden.bs.dropdown",function(){t("#sidebar").css("z-index","")}),t("#nav-state-toggle, #nav-collapse-toggle").tooltip(),MedlibApp.onResize(a,!0),a(),t(document).on("close.widgster",function(e){var i=t(e.target).closest('.content > .row > [class*="col-"]:not(.widget-container)');i.find(".widget").not(e.target).length||i.remove()})}(jQuery),!function(t){function e(){var e=t(".chat-sidebar-contacts");0!=t("#chat").find(".slimScrollDiv").length&&e.slimscroll({destroy:!0}),e.slimscroll({height:window.innerHeight,width:"",size:"4px"})}var i=t("body").addClass("chat-sidebar-container");t(document).on("click","[data-toggle=chat-sidebar]",function(){i.toggleClass("chat-sidebar-opened"),t(this).find(".chat-notification-medlib").remove()}),t("#content").on("swipeLeft",function(e){console.log(arguments),t("body").is(".nav-collapsed")&&i.addClass("chat-sidebar-opened")}).on("swipeRight",function(e){t("body").is(".nav-collapsed.chat-sidebar-opened")&&i.removeClass("chat-sidebar-opened").addClass("chat-sidebar-closing").one(t.support.transition.end,function(){t("body").removeClass("chat-sidebar-closing")}).emulateTransitionEnd(300)}),t(document).on("click",".chat-sidebar-user-group > a",function(){var e=t(this),i=t(e.attr("href")),a=i.find(".title");return e.removeClass("active").find(".badge").remove(),i.addClass("open"),t(".chat-sidebar-contacts").removeClass("open"),t(".chat-sidebar-footer").addClass("open"),t(".message-list",i).slimscroll({height:i.height()-a.height()-parseInt(a.css("margin-top"))-parseInt(a.css("margin-bottom")),width:"",size:"4px"}),!1}),t(document).on("click",".chat-sidebar-chat .js-back",function(){t(this).closest(".chat-sidebar-chat").removeClass("open"),t(".chat-sidebar-contacts").addClass("open");return t(".chat-sidebar-footer").removeClass("open"),!1}),t("#chat-sidebar-input").keyup(function(e){if(13==e.keyCode){var i;if(""!=(i=t(this).val().trim())){var a=t(".chat-sidebar-chat.open .message-list"),n=t('<li class="message from-me"><span class="thumb-sm"><img class="img-circle" src="img/avatar.png" alt="..."></span><div class="message-body"></div></li>');n.appendTo(a).find(".message-body").text(i),t(this).val("")}}}),t("#chat-sidebar-search").keyup(function(){var e=t(".chat-sidebar-contacts.open"),i=t(".chat-sidebar-chat.open"),a=t(this).val().trim().toUpperCase();e.length&&t(".chat-sidebar-user-group .list-group-item").addClass("hide").filter(function(){return""==a?!0:-1!=t(this).find(".message-sender").text().toUpperCase().indexOf(a)}).removeClass("hide"),i.length&&t(".chat-sidebar-chat.open .message-list .message").addClass("hide").filter(function(){return""==a?!0:-1!=t(this).find(".message-body").text().toUpperCase().indexOf(a)}).removeClass("hide")}),MedlibApp.onResize(e,!0),e()}(jQuery)}function initAppFixes(){"WebkitAppearance"in document.documentElement.style}function initDemoFunctions(){!function(t){t("#load-notifications-btn").on("ajax-load:end",function(){setTimeout(function(){t("#notifications-list").find(".bg-attention").removeClass("bg-attention")},1e4)}),t("#notifications-toggle").find("input").on("ajax-load:end",function(){t("#notifications-list").find("[data-toggle=tooltip]").tooltip()}),t('[data-toggle="chat-sidebar"]').one("click",function(){setTimeout(function(){t(".chat-sidebar-user-group:first-of-type .list-group-item:first-child").addClass("active").find(".fa-circle").after('<span class="badge badge-danger pull-right animated bounceInDown">3</span>')},1e3)})}(jQuery)}window.PJAX_ENABLED=!0,window.DEBUG=!0,$.fn.widgster.Constructor.DEFAULTS.bodySelector=".widget-body",$(function(){var t=function(){this.pjaxEnabled=window.PJAX_ENABLED,this.debug=window.DEBUG,this.navCollapseTimeout=2500,this.$sidebar=$("#sidebar"),this.$content=$("#content"),this.$loaderWrap=$(".loader-wrap"),this.$navigationStateToggle=$("#nav-state-toggle"),this.$navigationCollapseToggle=$("#nav-collapse-toggle"),this.settings=window.MedlibSettings,this.pageLoadCallbacks={},this.resizeCallbacks=[],this.screenSizeCallbacks={xs:{enter:[],exit:[]},sm:{enter:[],exit:[]},md:{enter:[],exit:[]},lg:{enter:[],exit:[]}},this.loading=!1,this._resetResizeCallbacks(),this._initOnResizeCallbacks(),this._initOnScreenSizeCallbacks(),this.$sidebar.on("mouseenter",$.proxy(this._sidebarMouseEnter,this)),this.$sidebar.on("mouseleave",$.proxy(this._sidebarMouseLeave,this)),$(document).on("click",".nav-collapsed #sidebar",$.proxy(this.expandNavigation,this)),"ontouchstart"in window&&this.$content.swipe({swipeLeft:$.proxy(this._contentSwipeLeft,this),swipeRight:$.proxy(this._contentSwipeRight,this),threshold:Medlib.isScreen("xs")?100:200}),this.checkNavigationState(),this.pjaxEnabled&&(this.$sidebar.find(".sidebar-nav a:not([data-toggle=collapse], [data-no-pjax], [href=#])").on("click",$.proxy(this._checkLoading,this)),$(document).pjax("#sidebar .sidebar-nav a:not([data-toggle=collapse], [data-no-pjax], [href=#])","#content",{fragment:"#content",type:"GET",timeout:4e3}),$(document).on("pjax:start",$.proxy(this._changeActiveNavigationItem,this)),$(document).on("pjax:start",$.proxy(this._resetResizeCallbacks,this)),$(document).on("pjax:send",$.proxy(this.showLoader,this)),$(document).on("pjax:success",$.proxy(this._loadScripts,this)),$(document).on("medlib-app:loaded",$.proxy(this._loadingFinished,this)),$(document).on("medlib-app:loaded",$.proxy(this._collapseNavIfSmallScreen,this)),$(document).on("medlib-app:loaded",$.proxy(this.hideLoader,this)),$(document).on("pjax:end",$.proxy(this.pageLoaded,this))),this.$navigationStateToggle.on("click",$.proxy(this.toggleNavigationState,this)),this.$navigationCollapseToggle.on("click",$.proxy(this.toggleNavigationCollapseState,this)),this.$sidebar.find(".collapse").on("show.bs.collapse",function(t){if(t.target==t.currentTarget){var e=$(this).prev("[data-toggle=collapse]");$(e.data("parent")).find(".collapse.in").not($(this)).collapse("hide")}}).on("show.bs.collapse",function(t){t.target==t.currentTarget&&$(this).closest("li").addClass("open")}).on("hide.bs.collapse",function(t){t.target==t.currentTarget&&$(this).closest("li").removeClass("open")}),window.onerror=$.proxy(this._logErrors,this)};t.prototype._initOnResizeCallbacks=function(){var t,e=this;$(window).on("resize medlib-app:content-resize",function(){clearTimeout(t),t=setTimeout(function(){e._runPageCallbacks(e.pageResizeCallbacks),e.resizeCallbacks.forEach(function(t){t()})},100)})},t.prototype._initOnScreenSizeCallbacks=function(){var t,e=this,i=Medlib.getScreenSize();$(window).resize(function(){clearTimeout(t),t=setTimeout(function(){var t=Medlib.getScreenSize();t!=i&&(e.screenSizeCallbacks[i].exit.forEach(function(e){e(t,i)}),e.screenSizeCallbacks[t].enter.forEach(function(e){e(t,i)}),e.log("screen changed. new: "+t+", old: "+i)),i=t},100)})},t.prototype._resetResizeCallbacks=function(){this.pageResizeCallbacks={}},t.prototype.checkNavigationState=function(){if(this.isNavigationStatic())this.staticNavigationState(),(Medlib.isScreen("sm")||Medlib.isScreen("xs"))&&this.collapseNavigation();else if(Medlib.isScreen("md")||Medlib.isScreen("lg")){var t=this;setTimeout(function(){t.collapseNavigation()},this.navCollapseTimeout)}else this.collapseNavigation()},t.prototype.toggleNavigationCollapseState=function(){$("body").is(".nav-collapsed")?this.expandNavigation():this.collapseNavigation()},t.prototype.collapseNavigation=function(){this.isNavigationStatic()&&(Medlib.isScreen("md")||Medlib.isScreen("lg"))||($("body").addClass("nav-collapsed"),this.$sidebar.find(".collapse.in").collapse("hide").siblings("[data-toggle=collapse]").addClass("collapsed"))},t.prototype.expandNavigation=function(){this.isNavigationStatic()&&(Medlib.isScreen("md")||Medlib.isScreen("lg"))||($("body").removeClass("nav-collapsed"),this.$sidebar.find(".active .active").closest(".collapse").collapse("show").siblings("[data-toggle=collapse]").removeClass("collapsed"))},t.prototype._sidebarMouseEnter=function(){(Medlib.isScreen("md")||Medlib.isScreen("lg"))&&this.expandNavigation()},t.prototype._sidebarMouseLeave=function(){(Medlib.isScreen("md")||Medlib.isScreen("lg"))&&this.collapseNavigation()},t.prototype._collapseNavIfSmallScreen=function(){(Medlib.isScreen("xs")||Medlib.isScreen("sm"))&&this.collapseNavigation()},t.prototype.toggleNavigationState=function(){this.isNavigationStatic()?this.collapsingNavigationState():this.staticNavigationState(),$(window).trigger("medlib-app:content-resize")},t.prototype.staticNavigationState=function(){this.settings.set("nav-static",!0).save(),$("body").addClass("nav-static")},t.prototype.collapsingNavigationState=function(){this.settings.set("nav-static",!1).save(),$("body").removeClass("nav-static"),this.collapseNavigation()},t.prototype.isNavigationStatic=function(){return this.settings.get("nav-static")===!0},t.prototype._changeActiveNavigationItem=function(t,e,i){var a=this.$sidebar.find('a[href*="'+this.extractPageName(i.url)+'"]').filter(function(){return this.href===i.url});a.is(".active > .collapse > li > a")||this.$sidebar.find(".active .active").closest(".collapse").collapse("hide"),this.$sidebar.find(".active").removeClass("active"),a.closest("li").addClass("active").parents("li").addClass("active")},t.prototype._contentSwipeLeft=function(){Medlib.isScreen("lg")||$("body").is(".nav-collapsed")||this.collapseNavigation()},t.prototype._contentSwipeRight=function(){Medlib.isScreen("lg")||$("body").is(".chat-sidebar-closing")||$("body").is(".nav-collapsed")&&this.expandNavigation()},t.prototype.showLoader=function(){var t=this;this.showLoaderTimeout=setTimeout(function(){t.$loaderWrap.removeClass("hide"),setTimeout(function(){t.$loaderWrap.removeClass("hiding")},0)},200)},t.prototype.hideLoader=function(){clearTimeout(this.showLoaderTimeout),this.$loaderWrap.addClass("hiding");var t=this;this.$loaderWrap.one($.support.transition.end,function(){t.$loaderWrap.addClass("hide")}).emulateTransitionEnd(200)},t.prototype.onResize=function(t,e){e="undefined"!=typeof e?e:!1,e?this.resizeCallbacks.push(t):this._addPageCallback(this.pageResizeCallbacks,t)},t.prototype.onPageLoad=function(t){this._addPageCallback(this.pageLoadCallbacks,t)},t.prototype.onScreenSize=function(t,e,i){i="undefined"!=typeof i?i:!0,this.screenSizeCallbacks[t][i?"enter":"exit"].push(e)},t.prototype.pageLoaded=function(){this._runPageCallbacks(this.pageLoadCallbacks)},t.prototype._addPageCallback=function(t,e){var i=this.extractPageName(location.href);t[i]||(t[i]=[]),t[i].push(e)},t.prototype._runPageCallbacks=function(t){var e=this.extractPageName(location.href);t[e]&&t[e].forEach(function(t){t()})},t.prototype._loadScripts=function(t,e,i,a,n){var o=$($.parseHTML(e.match(/<body[^>]*>([\s\S.]*)<\/body>/i)[0],document,!0)),s=o.filter("script[src]").add(o.find("script[src]")),r=o.filter('script[type="text/template"]').add(o.find('script[type="text/template"]')),c=$("script[src]"),l=$('script[type="text/template"]');r.each(function(){var t=this.id,e=l.filter(function(){return this.id===t});if(!e.length){var i=document.createElement("script");i.id=$(this).attr("id"),i.type=$(this).attr("type"),i.innerHTML=this.innerHTML,document.body.appendChild(i)}});var d={load:function(t){t()}};s.each(function(){var t=this.src,e=c.filter(function(){return this.src===t});if(!e.length){var i=document.createElement("script");i.src=$(this).attr("src"),d.load(function(){document.body.appendChild(i)}),d=$(i)}});var p=this;d.load(function(){$(document).trigger("medlib-app:loaded"),p.log("scripts loaded.")})},t.prototype.extractPageName=function(t){var e=t.split("#")[0].substring(t.lastIndexOf("/")+1).split("?")[0];return""===e?"index.html":e},t.prototype._checkLoading=function(t){var e=this.loading;return this.loading=!0,e?(this.log("attempt to load page while already loading; preventing."),t.preventDefault()):this.log(t.currentTarget.href+" loading started."),!e},t.prototype._loadingFinished=function(){this.loading=!1},t.prototype._logErrors=function(){var t=JSON.parse(localStorage.getItem("lb-errors"))||{};t[(new Date).getTime()]=arguments,localStorage.setItem("medlib-errors",JSON.stringify(t))},t.prototype.log=function(t){this.debug&&console.log("Medlib Application : "+t+" - "+arguments.callee.caller.toString().slice(0,30).split("\n")[0]+" - "+this.extractPageName(location.href))},window.MedlibApp=new t,initAppPlugins(),initAppFunctions(),initAppFixes(),initDemoFunctions()});